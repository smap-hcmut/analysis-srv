# ==============================================================================
# Analytics Engine - Environment Configuration
# ==============================================================================
# Copy this file to .env and update values for your environment
# cp .env.example .env

# ==============================================================================
# Database Configuration
# ==============================================================================
DATABASE_URL=postgresql+asyncpg://dev:dev123@localhost:5432/analytics_dev
DATABASE_URL_SYNC=postgresql://dev:dev123@localhost:5432/analytics_dev

# ==============================================================================
# API Configuration
# ==============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true

# ==============================================================================
# Service Configuration
# ==============================================================================
SERVICE_NAME=analytics-engine
SERVICE_VERSION=0.1.0

# ==============================================================================
# Logging Configuration
# ==============================================================================
LOG_LEVEL=INFO
DEBUG=false

# ==============================================================================
# PhoBERT Model Configuration
# ==============================================================================
# Path to PhoBERT ONNX model directory
PHOBERT_MODEL_PATH=infrastructure/phobert/models
# Maximum sequence length for PhoBERT (default: 128)
PHOBERT_MAX_LENGTH=128
# Model file name (default: model_quantized.onnx)
PHOBERT_MODEL_FILE=model_quantized.onnx

# ==============================================================================
# SpaCy-YAKE Keyword Extraction Configuration
# ==============================================================================
# SpaCy model to use (default: xx_ent_wiki_sm - multilingual, recommended)
# Note: Vietnamese models (vi_core_news_*) are community-built and may not work
# with spaCy 3.8.11. The code will automatically fallback if unavailable.
SPACY_MODEL=xx_ent_wiki_sm

# YAKE language code (default: vi for Vietnamese)
YAKE_LANGUAGE=vi
# Maximum n-gram size for YAKE (default: 2)
YAKE_N=2
# Deduplication limit for YAKE (default: 0.8)
YAKE_DEDUP_LIM=0.8
# Maximum keywords to extract with YAKE (default: 30)
YAKE_MAX_KEYWORDS=30

# Maximum total keywords to return (default: 30)
MAX_KEYWORDS=30
# Weight for named entities in keyword scoring (default: 0.7)
ENTITY_WEIGHT=0.7
# Weight for noun chunks in keyword scoring (default: 0.5)
CHUNK_WEIGHT=0.5

# ==============================================================================
# Aspect Mapping Configuration
# ==============================================================================
# Enable aspect mapping for keywords (default: false)
# Set to true to enable hybrid keyword extraction with aspect categorization
ENABLE_ASPECT_MAPPING=false
# Path to aspect dictionary YAML file (default: config/aspects.yaml)
ASPECT_DICTIONARY_PATH=config/aspects.yaml
# Label for unknown/unmapped aspects (default: UNKNOWN)
UNKNOWN_ASPECT_LABEL=UNKNOWN

# ==============================================================================
# Text Preprocessor Configuration
# ==============================================================================
# Minimum text length after normalization (default: 10)
# Posts shorter than this will be flagged as too_short in stats
PREPROCESSOR_MIN_TEXT_LENGTH=10
# Maximum number of comments to include in merged content (default: 5)
PREPROCESSOR_MAX_COMMENTS=5

# ==============================================================================
# Intent Classifier Configuration
# ==============================================================================
# Enable intent classification (default: true)
INTENT_CLASSIFIER_ENABLED=true
# Confidence threshold for intent classification (default: 0.5)
INTENT_CLASSIFIER_CONFIDENCE_THRESHOLD=0.5
# Path to intent patterns YAML file (default: config/intent_patterns.yaml)
INTENT_PATTERNS_PATH=config/intent_patterns.yaml

# ==============================================================================
# RabbitMQ Configuration (Message Queue)
# ==============================================================================
# RabbitMQ connection URL
RABBITMQ_URL=amqp://guest:guest@localhost:5672/
# Queue name for analytics jobs
RABBITMQ_QUEUE_NAME=analytics_queue
# Prefetch count for message consumers (default: 1)
RABBITMQ_PREFETCH_COUNT=1

# ==============================================================================
# MinIO Configuration (Object Storage)
# ==============================================================================
# MinIO endpoint URL
MINIO_ENDPOINT=http://localhost:9000
# MinIO access key
MINIO_ACCESS_KEY=minioadmin
# MinIO secret key
MINIO_SECRET_KEY=minioadmin
