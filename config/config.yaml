service:
  name: "analytics-engine"
  version: "0.1.0"
  environment: "development"

database:
  url: "postgresql+asyncpg://dev:dev123@localhost:5432/analytics_dev"
  url_sync: "postgresql://dev:dev123@localhost:5432/analytics_dev"
  pool_size: 20
  max_overflow: 10

logging:
  level: "INFO"
  enable_console: true
  colorize: true
  service_name: "analytics-engine"

phobert:
  model_path: "infrastructure/phobert/models"
  max_length: 128
  model_file: "model_quantized.onnx"

keyword_extraction:
  spacy_model: "xx_ent_wiki_sm"
  yake_language: "vi"
  yake_n: 2
  yake_dedup_lim: 0.8
  yake_max_keywords: 30
  max_keywords: 30
  entity_weight: 0.7
  chunk_weight: 0.5

aspect_mapping:
  enabled: false
  dictionary_path: "config/aspects.yaml"
  unknown_label: "UNKNOWN"

rabbitmq:
  url: "amqp://guest:guest@localhost/"
  queue_name: "analytics_queue"
  prefetch_count: 1
  event:
    exchange: "smap.events"
    routing_key: "data.collected"
    queue_name: "analytics.data.collected"
  publish:
    exchange: "results.inbound"
    routing_key: "analyze.result"
    enabled: true

minio:
  endpoint: "http://localhost:9000"
  access_key: "minioadmin"
  secret_key: "minioadmin"
  crawl_results_bucket: "crawl-results"

compression:
  enabled: true
  default_level: 2
  algorithm: "zstd"
  min_size_bytes: 1024

preprocessor:
  min_text_length: 10
  max_comments: 5

intent_classifier:
  enabled: true
  confidence_threshold: 0.5
  patterns_path: "config/intent_patterns.yaml"

impact:
  weight:
    view: 0.01
    like: 1.0
    comment: 2.0
    save: 3.0
    share: 5.0
  platform:
    tiktok: 1.0
    facebook: 1.2
    youtube: 1.5
    instagram: 1.1
    unknown: 1.0
  amplifier:
    negative: 1.5
    neutral: 1.0
    positive: 1.1
  threshold:
    viral: 70.0
    kol_followers: 50000
    max_raw_score: 100000.0

batch:
  max_concurrent: 5
  timeout_seconds: 30
  expected_size:
    tiktok: 50
    youtube: 20

error:
  max_retries_per_item: 3
  backoff_base_seconds: 1.0
  backoff_max_seconds: 60.0

debug:
  raw_data: "false"
  sample_rate: 100

api:
  host: "0.0.0.0"
  port: 8000
  workers: 1
  cors_origins:
    - "*"
  root_path: ""
